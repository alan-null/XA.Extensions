---
ID: "0938fc70-6351-4747-bda2-14d35ed086c1"
Parent: "4610001d-6ff9-4057-8f47-74ba0010c959"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: /sitecore/media library/Feature/XA Extensions/ToolboxSearchbox/ToolboxSearchbox/Scripts/Application
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/0938FC7063514747BDA214D35ED086C1.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "65d724a3-42af-4826-a8ab-056f51efc560"
  Value: dmFyIF9fZXh0ZW5kc19zY19leHQgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kc19zY19leHQpIHx8IChmdW5jdGlvbiAoKSB7CiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAogICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwogICAgfTsKfSkoKTsKJ3VzZSBzdHJpY3QnOwp2YXIgU2l0ZWNvcmVFeHRlbnNpb25zOwooZnVuY3Rpb24gKFNpdGVjb3JlRXh0ZW5zaW9ucykgewogICAgdmFyIEhUTUxIZWxwZXJzID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBIVE1MSGVscGVycygpIHsKICAgICAgICB9CiAgICAgICAgSFRNTEhlbHBlcnMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uICh0YWdOYW1lLCBhdHRyaWJ1dGVzLCBkYXRhc2V0KSB7CiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTsKICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBhdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJpYnV0ZXNbYXR0cl0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGQgaW4gZGF0YXNldCkgewogICAgICAgICAgICAgICAgZWxlbWVudC5kYXRhc2V0W2RdID0gZGF0YXNldFtkXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZWxlbWVudDsKICAgICAgICB9OwogICAgICAgIEhUTUxIZWxwZXJzLmFkZFByb3h5ID0gZnVuY3Rpb24gKG9wZXJhbmQsIGZ1bmN0aW9uTmFtZSwgcHJveHlGbikgewogICAgICAgICAgICBpZiAodHlwZW9mIG9wZXJhbmQgPT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkUHJveHlUb0Z1bmN0aW9uKG9wZXJhbmQsIGZ1bmN0aW9uTmFtZSwgcHJveHlGbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRQcm94eVRvT2JqZWN0KG9wZXJhbmQsIGZ1bmN0aW9uTmFtZSwgcHJveHlGbik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIEhUTUxIZWxwZXJzLmFkZFByb3h5VG9GdW5jdGlvbiA9IGZ1bmN0aW9uIChmbiwgZnVuY3Rpb25OYW1lLCBwcm94eUZuKSB7CiAgICAgICAgICAgIHZhciBwcm94aWVkID0gZm4ucHJvdG90eXBlW2Z1bmN0aW9uTmFtZV07CiAgICAgICAgICAgIGZuLnByb3RvdHlwZVtmdW5jdGlvbk5hbWVdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHByb3hpZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIHByb3h5Rm4oYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH07CiAgICAgICAgfTsKICAgICAgICBIVE1MSGVscGVycy5hZGRQcm94eVRvT2JqZWN0ID0gZnVuY3Rpb24gKG9iaiwgZnVuY3Rpb25OYW1lLCBwcm94eUZuKSB7CiAgICAgICAgICAgIHZhciBwcm94aWVkID0gb2JqW2Z1bmN0aW9uTmFtZV07CiAgICAgICAgICAgIG9ialtmdW5jdGlvbk5hbWVdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHByb3hpZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIHByb3h5Rm4oYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH07CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gSFRNTEhlbHBlcnM7CiAgICB9KCkpOwogICAgU2l0ZWNvcmVFeHRlbnNpb25zLkhUTUxIZWxwZXJzID0gSFRNTEhlbHBlcnM7Cn0pKFNpdGVjb3JlRXh0ZW5zaW9ucyB8fCAoU2l0ZWNvcmVFeHRlbnNpb25zID0ge30pKTsKdmFyIFNpdGVjb3JlRXh0ZW5zaW9uczsKKGZ1bmN0aW9uIChTaXRlY29yZUV4dGVuc2lvbnMpIHsKICAgIHZhciBMaWJyYXJpZXM7CiAgICAoZnVuY3Rpb24gKExpYnJhcmllcykgewogICAgICAgIHZhciBGdXp6eSA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIEZ1enp5KCkgewogICAgICAgICAgICAgICAgdGhpcy5hbmFseXplU3ViVGVybXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuYW5hbHl6ZVN1YlRlcm1EZXB0aCA9IDEwOwogICAgICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRpbmcgPSB7CiAgICAgICAgICAgICAgICAgICAgYmVmb3JlOiAnPGVtPicsCiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICc8L2VtPicKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoQ29tcGFyYXRvciA9IGZ1bmN0aW9uIChtMSwgbTIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG0yLnNjb3JlIC0gbTEuc2NvcmUgIT0gMCkgPyBtMi5zY29yZSAtIG0xLnNjb3JlIDogbTEudGVybS5sZW5ndGggLSBtMi50ZXJtLmxlbmd0aDsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgRnV6enkucHJvdG90eXBlLmdldFNjb3JlID0gZnVuY3Rpb24gKHRlcm0sIHF1ZXJ5KSB7CiAgICAgICAgICAgICAgICB2YXIgbWF4ID0gdGhpcy5jYWxjRnV6enlTY29yZSh0ZXJtLCBxdWVyeSk7CiAgICAgICAgICAgICAgICB2YXIgdGVybUxlbmd0aCA9IHRlcm0ubGVuZ3RoOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5hbHl6ZVN1YlRlcm1zKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0ZXJtTGVuZ3RoICYmIGkgPCB0aGlzLmFuYWx5emVTdWJUZXJtRGVwdGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViVGVybSA9IHRlcm0uc3Vic3RyaW5nKGkpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NvcmUgPSB0aGlzLmNhbGNGdXp6eVNjb3JlKHN1YlRlcm0sIHF1ZXJ5KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3JlLnNjb3JlID4gbWF4LnNjb3JlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZS50ZXJtID0gdGVybTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlLmhpZ2hsaWdodGVkVGVybSA9IHRlcm0uc3Vic3RyaW5nKDAsIGkpICsgc2NvcmUuaGlnaGxpZ2h0ZWRUZXJtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gc2NvcmU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbWF4OwogICAgICAgICAgICB9OwogICAgICAgICAgICA7CiAgICAgICAgICAgIEZ1enp5LnByb3RvdHlwZS5jYWxjRnV6enlTY29yZSA9IGZ1bmN0aW9uICh0ZXJtLCBxdWVyeSkgewogICAgICAgICAgICAgICAgdmFyIHNjb3JlID0gMDsKICAgICAgICAgICAgICAgIHZhciB0ZXJtTGVuZ3RoID0gdGVybS5sZW5ndGg7CiAgICAgICAgICAgICAgICB2YXIgcXVlcnlMZW5ndGggPSBxdWVyeS5sZW5ndGg7CiAgICAgICAgICAgICAgICB2YXIgaGlnaGxpZ2h0aW5nID0gJyc7CiAgICAgICAgICAgICAgICB2YXIgdGkgPSAwOwogICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzTWF0Y2hpbmdDaGFyYWN0ZXIgPSAtMjsKICAgICAgICAgICAgICAgIGZvciAodmFyIHFpID0gMDsgcWkgPCBxdWVyeUxlbmd0aCAmJiB0aSA8IHRlcm1MZW5ndGg7IHFpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcWMgPSBxdWVyeS5jaGFyQXQocWkpOwogICAgICAgICAgICAgICAgICAgIHZhciBsb3dlclFjID0gcWMudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKDsgdGkgPCB0ZXJtTGVuZ3RoOyB0aSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YyA9IHRlcm0uY2hhckF0KHRpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvd2VyUWMgPT09IHRjLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByZXZpb3VzTWF0Y2hpbmdDaGFyYWN0ZXIgKyAxKSA9PT0gdGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZSArPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0aW5nICs9IHRoaXMuaGlnaGxpZ2h0aW5nLmJlZm9yZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0aW5nLmFmdGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNYXRjaGluZ0NoYXJhY3RlciA9IHRpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0aW5nICs9IHRjOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGlnaGxpZ2h0aW5nICs9IHRlcm0uc3Vic3RyaW5nKHRpLCB0ZXJtLmxlbmd0aCk7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHNjb3JlOiBzY29yZSwKICAgICAgICAgICAgICAgICAgICB0ZXJtOiB0ZXJtLAogICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSwKICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZFRlcm06IGhpZ2hsaWdodGluZwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgOwogICAgICAgICAgICByZXR1cm4gRnV6enk7CiAgICAgICAgfSgpKTsKICAgICAgICBMaWJyYXJpZXMuRnV6enkgPSBGdXp6eTsKICAgIH0pKExpYnJhcmllcyA9IFNpdGVjb3JlRXh0ZW5zaW9ucy5MaWJyYXJpZXMgfHwgKFNpdGVjb3JlRXh0ZW5zaW9ucy5MaWJyYXJpZXMgPSB7fSkpOwp9KShTaXRlY29yZUV4dGVuc2lvbnMgfHwgKFNpdGVjb3JlRXh0ZW5zaW9ucyA9IHt9KSk7Ci8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL19hbGwudHMnLz4KdmFyIFNpdGVjb3JlRXh0ZW5zaW9uczsKKGZ1bmN0aW9uIChTaXRlY29yZUV4dGVuc2lvbnMpIHsKICAgIHZhciBNb2R1bGVzOwogICAgKGZ1bmN0aW9uIChNb2R1bGVzKSB7CiAgICAgICAgdmFyIFRvb2xib3hTZWFyY2hCb3g7CiAgICAgICAgKGZ1bmN0aW9uIChUb29sYm94U2VhcmNoQm94KSB7CiAgICAgICAgICAgIHZhciBUb29sYm94U2VhcmNoQm94TW9kdWxlID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFRvb2xib3hTZWFyY2hCb3hNb2R1bGUobmFtZSwgZGVzY3JpcHRpb24sIHJhd09wdGlvbnMpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIFRvb2xib3hTZWFyY2hCb3hNb2R1bGUucHJvdG90eXBlLmNhbkV4ZWN1dGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvd1snJHhhJ10gIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkeGEudG9vbGJveCAhPSBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgVG9vbGJveFNlYXJjaEJveE1vZHVsZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIFNpdGVjb3JlRXh0ZW5zaW9ucy5IVE1MSGVscGVycy5hZGRQcm94eSgkeGEudG9vbGJveCwgJ2luaXQnLCBmdW5jdGlvbiAoKSB7IF90aGlzLnBvc3Rwb25lZEluaXQoKTsgfSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgVG9vbGJveFNlYXJjaEJveE1vZHVsZS5wcm90b3R5cGUucG9zdHBvbmVkSW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdG9vbGJveCA9IG5ldyBTZWFyY2hhYmxlVG9vbGJveCgpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiBUb29sYm94U2VhcmNoQm94TW9kdWxlOwogICAgICAgICAgICB9KCkpOwogICAgICAgICAgICBUb29sYm94U2VhcmNoQm94LlRvb2xib3hTZWFyY2hCb3hNb2R1bGUgPSBUb29sYm94U2VhcmNoQm94TW9kdWxlOwogICAgICAgICAgICB2YXIgVG9vbGJveCA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBUb29sYm94KCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyaW5ncyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbGJveFJlbmRlcmluZ3NMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N4YS10b29sYm94LXJvb3QtdWwnKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbmRSZW5kZXJpbmdzKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBUb29sYm94LnByb3RvdHlwZS5iaW5kUmVuZGVyaW5ncyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbCh0aGlzLnRvb2xib3hSZW5kZXJpbmdzTGlzdC5jaGlsZE5vZGVzLCBmdW5jdGlvbiAobGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlYyA9IG5ldyBUb29sYm94U2VjdGlvbihsaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25zLnB1c2goc2VjKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7IF90aGlzLnJlbmRlcmluZ3MgPSBfdGhpcy5yZW5kZXJpbmdzLmNvbmNhdChzLnJlbmRlcmluZ3MpOyB9KTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gVG9vbGJveDsKICAgICAgICAgICAgfSgpKTsKICAgICAgICAgICAgdmFyIFNlYXJjaGFibGVUb29sYm94ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgICAgICAgICAgICAgIF9fZXh0ZW5kc19zY19leHQoU2VhcmNoYWJsZVRvb2xib3gsIF9zdXBlcik7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBTZWFyY2hhYmxlVG9vbGJveCgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmZ1enp5ID0gbmV3IFNpdGVjb3JlRXh0ZW5zaW9ucy5MaWJyYXJpZXMuRnV6enkoKTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbmplY3RTZXJhY2hCb3goKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTZWFyY2hhYmxlVG9vbGJveC5wcm90b3R5cGUuZ2V0U2VhcmNoUmVzdWx0cyA9IGZ1bmN0aW9uIChxdWVyeSkgewogICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5ID09PSAnJykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnJlbmRlcmluZ3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNtZCA9IHRoaXMucmVuZGVyaW5nc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSB0aGlzLmZ1enp5LmdldFNjb3JlKGNtZC5uYW1lLCBxdWVyeSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaV0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJpbmc6IGNtZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlOiBmLnNjb3JlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVybTogZi50ZXJtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWRUZXJtOiBmLmhpZ2hsaWdodGVkVGVybQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnNvcnQodGhpcy5mdXp6eS5tYXRjaENvbXBhcmF0b3IpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzLnNsaWNlKDAsIDE1KTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBTZWFyY2hhYmxlVG9vbGJveC5wcm90b3R5cGUuaW5qZWN0U2VyYWNoQm94ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBzZWFyY2hCb3ggPSB0aGlzLmNyZWF0ZVNlYXJjaEJveCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBjbGVhclNlYXJjaCA9IHRoaXMuY3JlYXRlQ2xlYXJTZWFyY2goKTsKICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jcmVhdGVDb250YWluZXIoKTsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc2VhcmNoQm94KTsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2xlYXJTZWFyY2gpOwogICAgICAgICAgICAgICAgICAgIHZhciByZWZlcmVuY2UgPSB0aGlzLnRvb2xib3hSZW5kZXJpbmdzTGlzdDsKICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2UucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY29udGFpbmVyLCByZWZlcmVuY2UpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIFNlYXJjaGFibGVUb29sYm94LnByb3RvdHlwZS5jcmVhdGVTZWFyY2hCb3ggPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBTaXRlY29yZUV4dGVuc2lvbnMuSFRNTEhlbHBlcnMuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnc2MtZXh0LXRvb2xib3gtc2InLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnU2VhcmNoIGZvciByZW5kZXJpbmdzJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gdGhpczsKICAgICAgICAgICAgICAgICAgICBpbnB1dC5vbmtleXVwID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLmRlbGF5ZWRTZWFyY2gpOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWxheWVkU2VhcmNoID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmRvU2VhcmNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0OwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIDsKICAgICAgICAgICAgICAgIFNlYXJjaGFibGVUb29sYm94LnByb3RvdHlwZS5jcmVhdGVDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNpdGVjb3JlRXh0ZW5zaW9ucy5IVE1MSGVscGVycy5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyAiY2xhc3MiOiAnc2MtZXh0LXNlYXJjaC1ib3gtY29udGFpbmVyJyB9KTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBTZWFyY2hhYmxlVG9vbGJveC5wcm90b3R5cGUuY3JlYXRlQ2xlYXJTZWFyY2ggPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICAgICAgICAgICAgICB2YXIgY2xlYXJTcGFuID0gU2l0ZWNvcmVFeHRlbnNpb25zLkhUTUxIZWxwZXJzLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7ICJjbGFzcyI6ICdzYy1leHQtc2VhcmNoLWJveC1jbGVhcmVyJyB9KTsKICAgICAgICAgICAgICAgICAgICBjbGVhclNwYW4ub25jbGljayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNsZWFyU2VhcmNoQm94KCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xlYXJTcGFuOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIFNlYXJjaGFibGVUb29sYm94LnByb3RvdHlwZS5kb1NlYXJjaCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBocmFzZSA9IGUuc3JjRWxlbWVudC52YWx1ZTsKICAgICAgICAgICAgICAgICAgICBpZiAoZSAmJiBlLmtleUNvZGUgPT0gMjcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGhyYXNlID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWFyY2hCb3goKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaHJhc2UubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFNlYXJCb3hNb2RlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IHRoaXMuZ2V0U2VhcmNoUmVzdWx0cyhwaHJhc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bkZsYWdBbGxSZW5kZXJpbmdzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHNyLCBpbmRleCkgeyBzci5yZW5kZXJpbmcuZmxhZyhpbmRleCk7IH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlYXJjaEJveCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIDsKICAgICAgICAgICAgICAgIFNlYXJjaGFibGVUb29sYm94LnByb3RvdHlwZS5jbGVhclNlYXJjaEJveCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdG9vbGJveFNlYXJjaEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYy1leHQtdG9vbGJveC1zYicpOwogICAgICAgICAgICAgICAgICAgIHRvb2xib3hTZWFyY2hCb3gudmFsdWUgPSAiIjsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVuRmxhZ0FsbFJlbmRlcmluZ3MoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZFNlYXJCb3hNb2RlKCk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgU2VhcmNoYWJsZVRvb2xib3gucHJvdG90eXBlLnN0YXJ0U2VhckJveE1vZGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYm94UmVuZGVyaW5nc0xpc3QuY2xhc3NMaXN0LmFkZCgnc2MtZXh0LXNlYXJjaC1ib3gtZW5hYmxlZCcpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIFNlYXJjaGFibGVUb29sYm94LnByb3RvdHlwZS5lbmRTZWFyQm94TW9kZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xib3hSZW5kZXJpbmdzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzYy1leHQtc2VhcmNoLWJveC1lbmFibGVkJyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgU2VhcmNoYWJsZVRvb2xib3gucHJvdG90eXBlLnVuRmxhZ0FsbFJlbmRlcmluZ3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJpbmdzLmZvckVhY2goZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgci51bkZsYWcoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gU2VhcmNoYWJsZVRvb2xib3g7CiAgICAgICAgICAgIH0oVG9vbGJveCkpOwogICAgICAgICAgICB2YXIgVG9vbGJveFNlY3Rpb24gPSAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gVG9vbGJveFNlY3Rpb24obGkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyaW5ncyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaHRtbCA9IGxpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IGxpLmZpcnN0Q2hpbGQuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChsaS5sYXN0Q2hpbGQuY2hpbGROb2RlcywgZnVuY3Rpb24gKGxpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWMgPSBuZXcgU2VhcmNoYWJsZVRvb2xib3hSZW5kZXJpbmcobGkpOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJpbmdzLnB1c2goc2VjKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBUb29sYm94U2VjdGlvbjsKICAgICAgICAgICAgfSgpKTsKICAgICAgICAgICAgdmFyIFRvb2xib3hSZW5kZXJpbmcgPSAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gVG9vbGJveFJlbmRlcmluZyhsaSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaHRtbCA9IGxpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IGxpLmlubmVyVGV4dDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBUb29sYm94UmVuZGVyaW5nOwogICAgICAgICAgICB9KCkpOwogICAgICAgICAgICB2YXIgU2VhcmNoYWJsZVRvb2xib3hSZW5kZXJpbmcgPSAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgICAgICAgICAgICAgX19leHRlbmRzX3NjX2V4dChTZWFyY2hhYmxlVG9vbGJveFJlbmRlcmluZywgX3N1cGVyKTsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFNlYXJjaGFibGVUb29sYm94UmVuZGVyaW5nKGxpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGxpKSB8fCB0aGlzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgU2VhcmNoYWJsZVRvb2xib3hSZW5kZXJpbmcucHJvdG90eXBlLmZsYWcgPSBmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmh0bWwuY2xhc3NMaXN0LmFkZCgnc2MtZXh0LXNiLWhpdCcpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaHRtbC5jbGFzc0xpc3QuYWRkKCdyZXN1bHQtJyArIGluZGV4KTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBTZWFyY2hhYmxlVG9vbGJveFJlbmRlcmluZy5wcm90b3R5cGUudW5GbGFnID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaHRtbC5jbGFzc0xpc3QucmVtb3ZlKCdzYy1leHQtc2ItaGl0Jyk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDbGFzc0J5UHJlZml4KHRoaXMuaHRtbCwgInJlc3VsdC0iKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmh0bWwuY2xhc3NMaXN0LnJlbW92ZSgnc2MtZXh0LXNiLWhpdCcpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIFNlYXJjaGFibGVUb29sYm94UmVuZGVyaW5nLnByb3RvdHlwZS5yZW1vdmVDbGFzc0J5UHJlZml4ID0gZnVuY3Rpb24gKGVsLCBwcmVmaXgpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgZWwuY2xhc3NMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGVsLmNsYXNzTGlzdFtpbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50Lm1hdGNoKG5ldyBSZWdFeHAocHJlZml4ICsgJy4qPycsICdnJykpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiBTZWFyY2hhYmxlVG9vbGJveFJlbmRlcmluZzsKICAgICAgICAgICAgfShUb29sYm94UmVuZGVyaW5nKSk7CiAgICAgICAgICAgIHZhciBUb29sYm94U2VhcmNoUmVzdWx0ID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFRvb2xib3hTZWFyY2hSZXN1bHQoKSB7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gVG9vbGJveFNlYXJjaFJlc3VsdDsKICAgICAgICAgICAgfSgpKTsKICAgICAgICAgICAgVG9vbGJveFNlYXJjaEJveC5Ub29sYm94U2VhcmNoUmVzdWx0ID0gVG9vbGJveFNlYXJjaFJlc3VsdDsKICAgICAgICB9KShUb29sYm94U2VhcmNoQm94ID0gTW9kdWxlcy5Ub29sYm94U2VhcmNoQm94IHx8IChNb2R1bGVzLlRvb2xib3hTZWFyY2hCb3ggPSB7fSkpOwogICAgfSkoTW9kdWxlcyA9IFNpdGVjb3JlRXh0ZW5zaW9ucy5Nb2R1bGVzIHx8IChTaXRlY29yZUV4dGVuc2lvbnMuTW9kdWxlcyA9IHt9KSk7Cn0pKFNpdGVjb3JlRXh0ZW5zaW9ucyB8fCAoU2l0ZWNvcmVFeHRlbnNpb25zID0ge30pKTsKLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vX2FsbC50cycvPgovLy8gPHJlZmVyZW5jZSBwYXRoPSdUb29sYm94U2VhcmNoQm94TW9kdWxlLnRzJy8+IAovLy8gPHJlZmVyZW5jZSBwYXRoPSd0eXBpbmdzL3NpdGVjb3JlLmQudHMnLz4KLy8vIDxyZWZlcmVuY2UgcGF0aD0nSHRtbEhlbHBlcnMudHMnLz4KLy8vIDxyZWZlcmVuY2UgcGF0aD0nbGlicmFyaWVzL0Z1enp5LnRzJy8+Ci8vLyA8cmVmZXJlbmNlIHBhdGg9J21vZHVsZXMvdG9vbGJveFNlYXJjaC9fYWxsLnRzJy8+IAovLy8gPHJlZmVyZW5jZSBwYXRoPSdfYWxsLnRzJy8+Cid1c2Ugc3RyaWN0JzsKdmFyIFNpdGVjb3JlRXh0ZW5zaW9uczsKKGZ1bmN0aW9uIChTaXRlY29yZUV4dGVuc2lvbnMpIHsKICAgIHZhciB0b29sYm94U2VhcmNoQm94ID0gbmV3IFNpdGVjb3JlRXh0ZW5zaW9ucy5Nb2R1bGVzLlRvb2xib3hTZWFyY2hCb3guVG9vbGJveFNlYXJjaEJveE1vZHVsZSgnVG9vbGJveCBTZWFyY2hib3gnLCAnJywgbnVsbCk7CiAgICB0b29sYm94U2VhcmNoQm94LmluaXRpYWxpemUoKTsKfSkoU2l0ZWNvcmVFeHRlbnNpb25zIHx8IChTaXRlY29yZUV4dGVuc2lvbnMgPSB7fSkpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXBwbGljYXRpb24uanMubWFwCg==
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 15760
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20170508T141043Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: sitecore\Admin
