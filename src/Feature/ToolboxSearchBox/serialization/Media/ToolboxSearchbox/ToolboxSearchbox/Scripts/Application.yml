---
ID: "0938fc70-6351-4747-bda2-14d35ed086c1"
Parent: "4610001d-6ff9-4057-8f47-74ba0010c959"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: /sitecore/media library/Feature/XA Extensions/ToolboxSearchbox/ToolboxSearchbox/Scripts/Application
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/0938FC7063514747BDA214D35ED086C1.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "292dbb2b-28ea-45a7-80a4-b239955c7a56"
  Value: dmFyIF9fZXh0ZW5kc19zY19leHQgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kc19zY19leHQpIHx8IChmdW5jdGlvbiAoKSB7CiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAogICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwogICAgfTsKfSkoKTsKJ3VzZSBzdHJpY3QnOwp2YXIgU2l0ZWNvcmVFeHRlbnNpb25zOwooZnVuY3Rpb24gKFNpdGVjb3JlRXh0ZW5zaW9ucykgewogICAgdmFyIEhUTUxIZWxwZXJzID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBIVE1MSGVscGVycygpIHsKICAgICAgICB9CiAgICAgICAgSFRNTEhlbHBlcnMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uICh0YWdOYW1lLCBhdHRyaWJ1dGVzLCBkYXRhc2V0KSB7CiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTsKICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBhdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJpYnV0ZXNbYXR0cl0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGQgaW4gZGF0YXNldCkgewogICAgICAgICAgICAgICAgZWxlbWVudC5kYXRhc2V0W2RdID0gZGF0YXNldFtkXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZWxlbWVudDsKICAgICAgICB9OwogICAgICAgIEhUTUxIZWxwZXJzLmFkZFByb3h5ID0gZnVuY3Rpb24gKG9wZXJhbmQsIGZ1bmN0aW9uTmFtZSwgcHJveHlGbikgewogICAgICAgICAgICBpZiAodHlwZW9mIG9wZXJhbmQgPT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkUHJveHlUb0Z1bmN0aW9uKG9wZXJhbmQsIGZ1bmN0aW9uTmFtZSwgcHJveHlGbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRQcm94eVRvT2JqZWN0KG9wZXJhbmQsIGZ1bmN0aW9uTmFtZSwgcHJveHlGbik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIEhUTUxIZWxwZXJzLmFkZFByb3h5VG9GdW5jdGlvbiA9IGZ1bmN0aW9uIChmbiwgZnVuY3Rpb25OYW1lLCBwcm94eUZuKSB7CiAgICAgICAgICAgIHZhciBwcm94aWVkID0gZm4ucHJvdG90eXBlW2Z1bmN0aW9uTmFtZV07CiAgICAgICAgICAgIGZuLnByb3RvdHlwZVtmdW5jdGlvbk5hbWVdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHByb3hpZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIHByb3h5Rm4oYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH07CiAgICAgICAgfTsKICAgICAgICBIVE1MSGVscGVycy5hZGRQcm94eVRvT2JqZWN0ID0gZnVuY3Rpb24gKG9iaiwgZnVuY3Rpb25OYW1lLCBwcm94eUZuKSB7CiAgICAgICAgICAgIHZhciBwcm94aWVkID0gb2JqW2Z1bmN0aW9uTmFtZV07CiAgICAgICAgICAgIG9ialtmdW5jdGlvbk5hbWVdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHByb3hpZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIHByb3h5Rm4oYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH07CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gSFRNTEhlbHBlcnM7CiAgICB9KCkpOwogICAgU2l0ZWNvcmVFeHRlbnNpb25zLkhUTUxIZWxwZXJzID0gSFRNTEhlbHBlcnM7Cn0pKFNpdGVjb3JlRXh0ZW5zaW9ucyB8fCAoU2l0ZWNvcmVFeHRlbnNpb25zID0ge30pKTsKdmFyIFNpdGVjb3JlRXh0ZW5zaW9uczsKKGZ1bmN0aW9uIChTaXRlY29yZUV4dGVuc2lvbnMpIHsKICAgIHZhciBMaWJyYXJpZXM7CiAgICAoZnVuY3Rpb24gKExpYnJhcmllcykgewogICAgICAgIHZhciBGdXp6eSA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIEZ1enp5KCkgewogICAgICAgICAgICAgICAgdGhpcy5hbmFseXplU3ViVGVybXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuYW5hbHl6ZVN1YlRlcm1EZXB0aCA9IDEwOwogICAgICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRpbmcgPSB7CiAgICAgICAgICAgICAgICAgICAgYmVmb3JlOiAnPGVtPicsCiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICc8L2VtPicKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoQ29tcGFyYXRvciA9IGZ1bmN0aW9uIChtMSwgbTIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG0yLnNjb3JlIC0gbTEuc2NvcmUgIT0gMCkgPyBtMi5zY29yZSAtIG0xLnNjb3JlIDogbTEudGVybS5sZW5ndGggLSBtMi50ZXJtLmxlbmd0aDsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgRnV6enkucHJvdG90eXBlLmdldFNjb3JlID0gZnVuY3Rpb24gKHRlcm0sIHF1ZXJ5KSB7CiAgICAgICAgICAgICAgICB2YXIgbWF4ID0gdGhpcy5jYWxjRnV6enlTY29yZSh0ZXJtLCBxdWVyeSk7CiAgICAgICAgICAgICAgICB2YXIgdGVybUxlbmd0aCA9IHRlcm0ubGVuZ3RoOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5hbHl6ZVN1YlRlcm1zKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0ZXJtTGVuZ3RoICYmIGkgPCB0aGlzLmFuYWx5emVTdWJUZXJtRGVwdGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViVGVybSA9IHRlcm0uc3Vic3RyaW5nKGkpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NvcmUgPSB0aGlzLmNhbGNGdXp6eVNjb3JlKHN1YlRlcm0sIHF1ZXJ5KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3JlLnNjb3JlID4gbWF4LnNjb3JlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZS50ZXJtID0gdGVybTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlLmhpZ2hsaWdodGVkVGVybSA9IHRlcm0uc3Vic3RyaW5nKDAsIGkpICsgc2NvcmUuaGlnaGxpZ2h0ZWRUZXJtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gc2NvcmU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbWF4OwogICAgICAgICAgICB9OwogICAgICAgICAgICA7CiAgICAgICAgICAgIEZ1enp5LnByb3RvdHlwZS5jYWxjRnV6enlTY29yZSA9IGZ1bmN0aW9uICh0ZXJtLCBxdWVyeSkgewogICAgICAgICAgICAgICAgdmFyIHNjb3JlID0gMDsKICAgICAgICAgICAgICAgIHZhciB0ZXJtTGVuZ3RoID0gdGVybS5sZW5ndGg7CiAgICAgICAgICAgICAgICB2YXIgcXVlcnlMZW5ndGggPSBxdWVyeS5sZW5ndGg7CiAgICAgICAgICAgICAgICB2YXIgaGlnaGxpZ2h0aW5nID0gJyc7CiAgICAgICAgICAgICAgICB2YXIgdGkgPSAwOwogICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzTWF0Y2hpbmdDaGFyYWN0ZXIgPSAtMjsKICAgICAgICAgICAgICAgIGZvciAodmFyIHFpID0gMDsgcWkgPCBxdWVyeUxlbmd0aCAmJiB0aSA8IHRlcm1MZW5ndGg7IHFpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcWMgPSBxdWVyeS5jaGFyQXQocWkpOwogICAgICAgICAgICAgICAgICAgIHZhciBsb3dlclFjID0gcWMudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKDsgdGkgPCB0ZXJtTGVuZ3RoOyB0aSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YyA9IHRlcm0uY2hhckF0KHRpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvd2VyUWMgPT09IHRjLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByZXZpb3VzTWF0Y2hpbmdDaGFyYWN0ZXIgKyAxKSA9PT0gdGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZSArPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0aW5nICs9IHRoaXMuaGlnaGxpZ2h0aW5nLmJlZm9yZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0aW5nLmFmdGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNYXRjaGluZ0NoYXJhY3RlciA9IHRpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0aW5nICs9IHRjOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGlnaGxpZ2h0aW5nICs9IHRlcm0uc3Vic3RyaW5nKHRpLCB0ZXJtLmxlbmd0aCk7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHNjb3JlOiBzY29yZSwKICAgICAgICAgICAgICAgICAgICB0ZXJtOiB0ZXJtLAogICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSwKICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZFRlcm06IGhpZ2hsaWdodGluZwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgOwogICAgICAgICAgICByZXR1cm4gRnV6enk7CiAgICAgICAgfSgpKTsKICAgICAgICBMaWJyYXJpZXMuRnV6enkgPSBGdXp6eTsKICAgIH0pKExpYnJhcmllcyA9IFNpdGVjb3JlRXh0ZW5zaW9ucy5MaWJyYXJpZXMgfHwgKFNpdGVjb3JlRXh0ZW5zaW9ucy5MaWJyYXJpZXMgPSB7fSkpOwp9KShTaXRlY29yZUV4dGVuc2lvbnMgfHwgKFNpdGVjb3JlRXh0ZW5zaW9ucyA9IHt9KSk7Ci8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL19hbGwudHMnLz4KdmFyIFNpdGVjb3JlRXh0ZW5zaW9uczsKKGZ1bmN0aW9uIChTaXRlY29yZUV4dGVuc2lvbnMpIHsKICAgIHZhciBNb2R1bGVzOwogICAgKGZ1bmN0aW9uIChNb2R1bGVzKSB7CiAgICAgICAgdmFyIFRvb2xib3hTZWFyY2hCb3g7CiAgICAgICAgKGZ1bmN0aW9uIChUb29sYm94U2VhcmNoQm94KSB7CiAgICAgICAgICAgIHZhciBUb29sYm94U2VhcmNoQm94TW9kdWxlID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFRvb2xib3hTZWFyY2hCb3hNb2R1bGUobmFtZSwgZGVzY3JpcHRpb24sIHJhd09wdGlvbnMpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIFRvb2xib3hTZWFyY2hCb3hNb2R1bGUucHJvdG90eXBlLmNhbkV4ZWN1dGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvd1snJHhhJ10gIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkeGEudG9vbGJveCAhPSBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgVG9vbGJveFNlYXJjaEJveE1vZHVsZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIFNpdGVjb3JlRXh0ZW5zaW9ucy5IVE1MSGVscGVycy5hZGRQcm94eSgkeGEudG9vbGJveCwgJ2luaXQnLCBmdW5jdGlvbiAoKSB7IF90aGlzLnBvc3Rwb25lZEluaXQoKTsgfSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgVG9vbGJveFNlYXJjaEJveE1vZHVsZS5wcm90b3R5cGUucG9zdHBvbmVkSW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdG9vbGJveCA9IG5ldyBTZWFyY2hhYmxlVG9vbGJveCgpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiBUb29sYm94U2VhcmNoQm94TW9kdWxlOwogICAgICAgICAgICB9KCkpOwogICAgICAgICAgICBUb29sYm94U2VhcmNoQm94LlRvb2xib3hTZWFyY2hCb3hNb2R1bGUgPSBUb29sYm94U2VhcmNoQm94TW9kdWxlOwogICAgICAgICAgICB2YXIgVG9vbGJveCA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBUb29sYm94KCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyaW5ncyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbGJveFJlbmRlcmluZ3NMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N4YS10b29sYm94LXJvb3QtdWwnKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbmRSZW5kZXJpbmdzKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBUb29sYm94LnByb3RvdHlwZS5iaW5kUmVuZGVyaW5ncyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbCh0aGlzLnRvb2xib3hSZW5kZXJpbmdzTGlzdC5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC5xdWVyeVNlbGVjdG9yQWxsKCJkaXY+ZGl2IiksIGZ1bmN0aW9uIChsaSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VjID0gbmV3IFRvb2xib3hTZWN0aW9uKGxpKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbnMucHVzaChzZWMpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKHMpIHsgX3RoaXMucmVuZGVyaW5ncyA9IF90aGlzLnJlbmRlcmluZ3MuY29uY2F0KHMucmVuZGVyaW5ncyk7IH0pOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiBUb29sYm94OwogICAgICAgICAgICB9KCkpOwogICAgICAgICAgICB2YXIgU2VhcmNoYWJsZVRvb2xib3ggPSAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgICAgICAgICAgICAgX19leHRlbmRzX3NjX2V4dChTZWFyY2hhYmxlVG9vbGJveCwgX3N1cGVyKTsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFNlYXJjaGFibGVUb29sYm94KCkgewogICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZnV6enkgPSBuZXcgU2l0ZWNvcmVFeHRlbnNpb25zLkxpYnJhcmllcy5GdXp6eSgpOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmluamVjdFNlcmFjaEJveCgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIFNlYXJjaGFibGVUb29sYm94LnByb3RvdHlwZS5nZXRTZWFyY2hSZXN1bHRzID0gZnVuY3Rpb24gKHF1ZXJ5KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBuZXcgQXJyYXkoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaTsKICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnkgPT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMucmVuZGVyaW5ncy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY21kID0gdGhpcy5yZW5kZXJpbmdzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IHRoaXMuZnV6enkuZ2V0U2NvcmUoY21kLm5hbWUsIHF1ZXJ5KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmluZzogY21kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmU6IGYuc2NvcmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXJtOiBmLnRlcm0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZFRlcm06IGYuaGlnaGxpZ2h0ZWRUZXJtCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuc29ydCh0aGlzLmZ1enp5Lm1hdGNoQ29tcGFyYXRvcik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHMuc2xpY2UoMCwgMzgpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIFNlYXJjaGFibGVUb29sYm94LnByb3RvdHlwZS5pbmplY3RTZXJhY2hCb3ggPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNlYXJjaEJveCA9IHRoaXMuY3JlYXRlU2VhcmNoQm94KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNsZWFyU2VhcmNoID0gdGhpcy5jcmVhdGVDbGVhclNlYXJjaCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmNyZWF0ZUNvbnRhaW5lcigpOwogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWFyY2hCb3gpOwogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjbGVhclNlYXJjaCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZmVyZW5jZSA9IHRoaXMudG9vbGJveFJlbmRlcmluZ3NMaXN0OwogICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjb250YWluZXIsIHJlZmVyZW5jZSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgU2VhcmNoYWJsZVRvb2xib3gucHJvdG90eXBlLmNyZWF0ZVNlYXJjaEJveCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IFNpdGVjb3JlRXh0ZW5zaW9ucy5IVE1MSGVscGVycy5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdzYy1leHQtdG9vbGJveC1zYicsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdTZWFyY2ggZm9yIHJlbmRlcmluZ3MnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMuZGVsYXllZFNlYXJjaCk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlbGF5ZWRTZWFyY2ggPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZG9TZWFyY2goZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQ7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgU2VhcmNoYWJsZVRvb2xib3gucHJvdG90eXBlLmNyZWF0ZUNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gU2l0ZWNvcmVFeHRlbnNpb25zLkhUTUxIZWxwZXJzLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7ICJjbGFzcyI6ICdzYy1leHQtc2VhcmNoLWJveC1jb250YWluZXInIH0pOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIFNlYXJjaGFibGVUb29sYm94LnByb3RvdHlwZS5jcmVhdGVDbGVhclNlYXJjaCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHZhciBjbGVhclNwYW4gPSBTaXRlY29yZUV4dGVuc2lvbnMuSFRNTEhlbHBlcnMuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsgImNsYXNzIjogJ3NjLWV4dC1zZWFyY2gtYm94LWNsZWFyZXInIH0pOwogICAgICAgICAgICAgICAgICAgIGNsZWFyU3Bhbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xlYXJTZWFyY2hCb3goKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGVhclNwYW47CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgU2VhcmNoYWJsZVRvb2xib3gucHJvdG90eXBlLmRvU2VhcmNoID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcGhyYXNlID0gZS5zcmNFbGVtZW50LnZhbHVlOwogICAgICAgICAgICAgICAgICAgIGlmIChlICYmIGUua2V5Q29kZSA9PSAyNykgewogICAgICAgICAgICAgICAgICAgICAgICBwaHJhc2UgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlYXJjaEJveCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBocmFzZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0U2VhckJveE1vZGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gdGhpcy5nZXRTZWFyY2hSZXN1bHRzKHBocmFzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuRmxhZ0FsbFJlbmRlcmluZ3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbiAoc3IsIGluZGV4KSB7IHNyLnJlbmRlcmluZy5mbGFnKGluZGV4KTsgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VhcmNoQm94KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgU2VhcmNoYWJsZVRvb2xib3gucHJvdG90eXBlLmNsZWFyU2VhcmNoQm94ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0b29sYm94U2VhcmNoQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjLWV4dC10b29sYm94LXNiJyk7CiAgICAgICAgICAgICAgICAgICAgdG9vbGJveFNlYXJjaEJveC52YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgICAgIHRoaXMudW5GbGFnQWxsUmVuZGVyaW5ncygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kU2VhckJveE1vZGUoKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBTZWFyY2hhYmxlVG9vbGJveC5wcm90b3R5cGUuc3RhcnRTZWFyQm94TW9kZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xib3hSZW5kZXJpbmdzTGlzdC5jbGFzc0xpc3QuYWRkKCdzYy1leHQtc2VhcmNoLWJveC1lbmFibGVkJyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgU2VhcmNoYWJsZVRvb2xib3gucHJvdG90eXBlLmVuZFNlYXJCb3hNb2RlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbGJveFJlbmRlcmluZ3NMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3NjLWV4dC1zZWFyY2gtYm94LWVuYWJsZWQnKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBTZWFyY2hhYmxlVG9vbGJveC5wcm90b3R5cGUudW5GbGFnQWxsUmVuZGVyaW5ncyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmluZ3MuZm9yRWFjaChmdW5jdGlvbiAocikgewogICAgICAgICAgICAgICAgICAgICAgICByLnVuRmxhZygpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiBTZWFyY2hhYmxlVG9vbGJveDsKICAgICAgICAgICAgfShUb29sYm94KSk7CiAgICAgICAgICAgIHZhciBUb29sYm94U2VjdGlvbiA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBUb29sYm94U2VjdGlvbihsaSkgewogICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJpbmdzID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5odG1sID0gbGk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gbGkuZmlyc3RDaGlsZC5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGxpLmxhc3RDaGlsZC5jaGlsZE5vZGVzLCBmdW5jdGlvbiAobGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlYyA9IG5ldyBTZWFyY2hhYmxlVG9vbGJveFJlbmRlcmluZyhsaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlcmluZ3MucHVzaChzZWMpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIFRvb2xib3hTZWN0aW9uOwogICAgICAgICAgICB9KCkpOwogICAgICAgICAgICB2YXIgVG9vbGJveFJlbmRlcmluZyA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBUb29sYm94UmVuZGVyaW5nKGxpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5odG1sID0gbGk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gbGkuaW5uZXJUZXh0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIFRvb2xib3hSZW5kZXJpbmc7CiAgICAgICAgICAgIH0oKSk7CiAgICAgICAgICAgIHZhciBTZWFyY2hhYmxlVG9vbGJveFJlbmRlcmluZyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICAgICAgICAgICAgICBfX2V4dGVuZHNfc2NfZXh0KFNlYXJjaGFibGVUb29sYm94UmVuZGVyaW5nLCBfc3VwZXIpOwogICAgICAgICAgICAgICAgZnVuY3Rpb24gU2VhcmNoYWJsZVRvb2xib3hSZW5kZXJpbmcobGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgbGkpIHx8IHRoaXM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTZWFyY2hhYmxlVG9vbGJveFJlbmRlcmluZy5wcm90b3R5cGUuZmxhZyA9IGZ1bmN0aW9uIChpbmRleCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaHRtbC5jbGFzc0xpc3QuYWRkKCdzYy1leHQtc2ItaGl0Jyk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5odG1sLmNsYXNzTGlzdC5hZGQoJ3Jlc3VsdC0nICsgaW5kZXgpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIFNlYXJjaGFibGVUb29sYm94UmVuZGVyaW5nLnByb3RvdHlwZS51bkZsYWcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5odG1sLmNsYXNzTGlzdC5yZW1vdmUoJ3NjLWV4dC1zYi1oaXQnKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNsYXNzQnlQcmVmaXgodGhpcy5odG1sLCAicmVzdWx0LSIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaHRtbC5jbGFzc0xpc3QucmVtb3ZlKCdzYy1leHQtc2ItaGl0Jyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgU2VhcmNoYWJsZVRvb2xib3hSZW5kZXJpbmcucHJvdG90eXBlLnJlbW92ZUNsYXNzQnlQcmVmaXggPSBmdW5jdGlvbiAoZWwsIHByZWZpeCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBlbC5jbGFzc0xpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWwuY2xhc3NMaXN0W2luZGV4XTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQubWF0Y2gobmV3IFJlZ0V4cChwcmVmaXggKyAnLio/JywgJ2cnKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIFNlYXJjaGFibGVUb29sYm94UmVuZGVyaW5nOwogICAgICAgICAgICB9KFRvb2xib3hSZW5kZXJpbmcpKTsKICAgICAgICAgICAgdmFyIFRvb2xib3hTZWFyY2hSZXN1bHQgPSAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gVG9vbGJveFNlYXJjaFJlc3VsdCgpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBUb29sYm94U2VhcmNoUmVzdWx0OwogICAgICAgICAgICB9KCkpOwogICAgICAgICAgICBUb29sYm94U2VhcmNoQm94LlRvb2xib3hTZWFyY2hSZXN1bHQgPSBUb29sYm94U2VhcmNoUmVzdWx0OwogICAgICAgIH0pKFRvb2xib3hTZWFyY2hCb3ggPSBNb2R1bGVzLlRvb2xib3hTZWFyY2hCb3ggfHwgKE1vZHVsZXMuVG9vbGJveFNlYXJjaEJveCA9IHt9KSk7CiAgICB9KShNb2R1bGVzID0gU2l0ZWNvcmVFeHRlbnNpb25zLk1vZHVsZXMgfHwgKFNpdGVjb3JlRXh0ZW5zaW9ucy5Nb2R1bGVzID0ge30pKTsKfSkoU2l0ZWNvcmVFeHRlbnNpb25zIHx8IChTaXRlY29yZUV4dGVuc2lvbnMgPSB7fSkpOwovLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9fYWxsLnRzJy8+Ci8vLyA8cmVmZXJlbmNlIHBhdGg9J1Rvb2xib3hTZWFyY2hCb3hNb2R1bGUudHMnLz4gCi8vLyA8cmVmZXJlbmNlIHBhdGg9J3R5cGluZ3Mvc2l0ZWNvcmUuZC50cycvPgovLy8gPHJlZmVyZW5jZSBwYXRoPSdIdG1sSGVscGVycy50cycvPgovLy8gPHJlZmVyZW5jZSBwYXRoPSdsaWJyYXJpZXMvRnV6enkudHMnLz4KLy8vIDxyZWZlcmVuY2UgcGF0aD0nbW9kdWxlcy90b29sYm94U2VhcmNoL19hbGwudHMnLz4gCi8vLyA8cmVmZXJlbmNlIHBhdGg9J19hbGwudHMnLz4KJ3VzZSBzdHJpY3QnOwp2YXIgU2l0ZWNvcmVFeHRlbnNpb25zOwooZnVuY3Rpb24gKFNpdGVjb3JlRXh0ZW5zaW9ucykgewogICAgdmFyIHRvb2xib3hTZWFyY2hCb3ggPSBuZXcgU2l0ZWNvcmVFeHRlbnNpb25zLk1vZHVsZXMuVG9vbGJveFNlYXJjaEJveC5Ub29sYm94U2VhcmNoQm94TW9kdWxlKCdUb29sYm94IFNlYXJjaGJveCcsICcnLCBudWxsKTsKICAgIHRvb2xib3hTZWFyY2hCb3guaW5pdGlhbGl6ZSgpOwp9KShTaXRlY29yZUV4dGVuc2lvbnMgfHwgKFNpdGVjb3JlRXh0ZW5zaW9ucyA9IHt9KSk7CgovLyMgc291cmNlTWFwcGluZ1VSTD1BcHBsaWNhdGlvbi5qcy5tYXAK
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 15813
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20170508T141043Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: sitecore\Admin
